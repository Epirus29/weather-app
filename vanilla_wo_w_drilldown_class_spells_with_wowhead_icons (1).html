<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vanilla WoW — Class Spells by Level (drill‑down + icons)</title>
<style>
  :root{--bg:#0e1014;--panel:#151a22;--muted:#a7afc0;--text:#e6e8ef;--accent:#7aa2ff;--border:#273048}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;gap:10px;align-items:center;justify-content:space-between}
  header h1{margin:0;font-size:16px}
  .app{display:grid;grid-template-columns:260px 1fr;min-height:calc(100vh - 52px)}
  aside{border-right:1px solid var(--border);padding:12px;overflow:auto}
  main{padding:12px;overflow:auto}
  .input{background:#0b0f17;border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:10px;width:100%}
  .btn{background:#0f1422;border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn.small{padding:6px 10px;font-size:12px}
  .class-btn{display:block;width:100%;text-align:left;padding:10px;border:1px solid var(--border);background:#0b0f17;border-radius:10px;margin:6px 0;cursor:pointer}
  .class-btn.active{outline:2px solid var(--accent)}
  .note{color:var(--muted);font-size:12px}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:12px}
  table{width:100%;border-collapse:separate;border-spacing:0 6px}
  th,td{text-align:left;padding:10px 12px}
  thead th{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
  tbody tr{background:#0a0f17;border:1px solid var(--border)}
  tbody td:first-child{border-radius:8px 0 0 8px}
  tbody td:last-child{border-radius:0 8px 8px 0}
  .ico{width:22px;height:22px;border-radius:4px;object-fit:cover;vertical-align:middle;margin-right:8px;border:1px solid #0003;box-shadow:0 1px 2px #0007}
  .row-flex{display:flex;align-items:center;gap:8px}
</style>
</head>
<body>
<header>
  <h1>Vanilla WoW — Every class → spells learned by level</h1>
  <div style="display:flex;gap:8px;align-items:center">
    <button id="exportBtn" class="btn small" title="Download current data">Export JSON</button>
    <label class="btn small" for="fileInput">Import JSON</label>
    <input id="fileInput" type="file" accept="application/json" hidden />
  </div>
</header>

<div class="app">
  <aside>
    <input id="classSearch" class="input" placeholder="Search classes… (Ctrl/⌘+K)" />
    <div id="classList" style="margin-top:8px"></div>
    <p class="note">No server required • Saves locally • Icons from wow.zamimg.com</p>
  </aside>
  <main>
    <div class="card" style="padding:12px">
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <strong id="classTitle">Select a class</strong>
        <span id="abilityCount" class="note"></span>
        <span style="margin-left:auto"></span>
        <input id="filter" class="input" placeholder="Filter abilities… ( / )" style="max-width:320px" />
      </div>
      <div id="tableWrap" style="margin-top:8px"></div>
      <p class="note" style="margin-top:8px">Tip: Export the JSON, edit/add skills & levels (and optional <code>icon</code> slugs), then Import it back. Works fully offline.</p>
    </div>

    <details class="card" style="margin-top:12px">
      <summary style="padding:10px 12px">Data schema</summary>
      <pre class="note" style="white-space:pre-wrap;padding:0 12px 12px 12px">{
  "classes": [
    {
      "name": "Mage",
      "abilities": [
        {"name":"Fireball","level":1,"icon":"spell_fire_fireball02"},
        {"name":"Frostbolt","level":4,"icon":"spell_frost_frostbolt02"}
      ]
    }
  ]
}
// icon uses the Wowhead/ZAM icon slug. The app renders icons from wow.zamimg.com/images/wow/icons/large/{slug}.jpg</pre>
    </details>
  </main>
</div>

<script>
// ---- Storage & helpers ----
const STORAGE_KEY = 'vanilla_wow_class_spells_icons_v1';
const $ = (s, r=document) => r.querySelector(s);
function save(data){ localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }
function load(){ try{ const raw = localStorage.getItem(STORAGE_KEY); if(raw) return JSON.parse(raw);}catch{} return DEFAULT_DATA; }

// ---- Dataset: base learn level per spell (Vanilla 1.12 style; easy to expand) ----
const DEFAULT_DATA = { classes: [
  { name:'Warrior', abilities:[
    {name:'Battle Shout',level:1,icon:'ability_warrior_battleshout'},
    {name:'Heroic Strike',level:1,icon:'ability_rogue_ambush'},
    {name:'Rend',level:4,icon:'ability_gouge'},
    {name:'Charge',level:4,icon:'ability_warrior_charge'},
    {name:'Thunder Clap',level:6,icon:'spell_nature_thunderclap'},
    {name:'Hamstring',level:8,icon:'ability_shockwave'},
    {name:'Taunt',level:10,icon:'spell_nature_reincarnation'},
    {name:'Overpower',level:12,icon:'ability_meleedamage'},
    {name:'Sunder Armor',level:10,icon:'ability_warrior_sunder'},
    {name:'Cleave',level:20,icon:'ability_warrior_cleave'},
    {name:'Intercept',level:30,icon:'ability_rogue_sprint'},
    {name:'Execute',level:24,icon:'inv_sword_48'},
    {name:'Berserker Rage',level:32,icon:'spell_nature_ancestralguardian'},
    {name:'Whirlwind',level:36,icon:'ability_whirlwind'},
    {name:'Pummel',level:38,icon:'inv_gauntlets_04'}
  ]},
  { name:'Paladin', abilities:[
    {name:'Seal of Righteousness',level:1,icon:'ability_thunderbolt'},
    {name:'Holy Light',level:1,icon:'spell_holy_holybolt'},
    {name:'Blessing of Might',level:4,icon:'spell_holy_fistofjustice'},
    {name:'Judgement',level:4,icon:'spell_holy_righteousfury'},
    {name:'Purify',level:8,icon:'spell_holy_purify'},
    {name:'Lay on Hands',level:10,icon:'spell_holy_layonhands'},
    {name:'Hammer of Justice',level:8,icon:'spell_holy_sealofmight'},
    {name:'Divine Shield',level:34,icon:'spell_holy_divineshield'},
    {name:'Consecration',level:20,icon:'spell_holy_innerfire'},
    {name:'Blessing of Kings',level:20,icon:'spell_magic_magearmor'},
    {name:'Exorcism',level:20,icon:'spell_holy_excorcism'},
    {name:'Redemption',level:12,icon:'spell_holy_resurrection'}
  ]},
  { name:'Hunter', abilities:[
    {name:'Auto Shot',level:1,icon:'ability_trueshot'},
    {name:'Serpent Sting',level:4,icon:'ability_hunter_quickshot'},
    {name:'Arcane Shot',level:6,icon:'ability_impalingbolt'},
    {name:'Hunter’s Mark',level:6,icon:'ability_hunter_snipershot'},
    {name:'Concussive Shot',level:8,icon:'spell_frost_stun'},
    {name:'Multi-Shot',level:18,icon:'ability_upgrademoonglaive'},
    {name:'Aimed Shot',level:20,icon:'inv_spear_07'},
    {name:'Mend Pet',level:12,icon:'ability_hunter_mendpet'},
    {name:'Feign Death',level:30,icon:'ability_rogue_feigndeath'},
    {name:'Tranquilizing Shot',level:60,icon:'spell_nature_drowsy'},
    {name:'Aspect of the Cheetah',level:20,icon:'ability_mount_jungletiger'},
    {name:'Volley',level:40,icon:'ability_marksmanship'}
  ]},
  { name:'Rogue', abilities:[
    {name:'Sinister Strike',level:1,icon:'spell_shadow_ritualofsacrifice'},
    {name:'Eviscerate',level:1,icon:'ability_rogue_eviscerate'},
    {name:'Backstab',level:4,icon:'ability_backstab'},
    {name:'Stealth',level:1,icon:'ability_stealth'},
    {name:'Gouge',level:6,icon:'ability_gouge'},
    {name:'Kick',level:12,icon:'ability_kick'},
    {name:'Slice and Dice',level:10,icon:'ability_rogue_slicedice'},
    {name:'Sprint',level:10,icon:'ability_rogue_sprint'},
    {name:'Blind',level:34,icon:'spell_shadow_mindsteal'},
    {name:'Vanish',level:22,icon:'ability_vanish'},
    {name:'Ambush',level:18,icon:'ability_ambush'},
    {name:'Hemorrhage',level:20,icon:'spell_shadow_lifedrain'}
  ]},
  { name:'Priest', abilities:[
    {name:'Smite',level:1,icon:'spell_holy_holysmite'},
    {name:'Power Word: Fortitude',level:1,icon:'spell_holy_wordfortitude'},
    {name:'Power Word: Shield',level:6,icon:'spell_holy_powerwordshield'},
    {name:'Renew',level:8,icon:'spell_holy_renew'},
    {name:'Psychic Scream',level:14,icon:'spell_shadow_psychicscream'},
    {name:'Heal',level:16,icon:'spell_holy_heal'},
    {name:'Flash Heal',level:20,icon:'spell_holy_flashheal'},
    {name:'Dispel Magic',level:18,icon:'spell_holy_dispelmagic'},
    {name:'Resurrection',level:10,icon:'spell_holy_resurrection'},
    {name:'Mind Control',level:30,icon:'spell_shadow_shadowworddominate'}
  ]},
  { name:'Shaman', abilities:[
    {name:'Lightning Bolt',level:1,icon:'spell_nature_lightning'},
    {name:'Healing Wave',level:1,icon:'spell_nature_magicimmunity'},
    {name:'Earth Shock',level:4,icon:'spell_nature_earthshock'},
    {name:'Rockbiter Weapon',level:1,icon:'spell_nature_rockbiter'},
    {name:'Reincarnation',level:30,icon:'spell_nature_reincarnation'},
    {name:'Ghost Wolf',level:20,icon:'spell_nature_spiritwolf'},
    {name:'Chain Lightning',level:32,icon:'spell_nature_chainlightning'},
    {name:'Chain Heal',level:40,icon:'spell_nature_healingwavegreater'},
    {name:'Windfury Weapon',level:30,icon:'spell_nature_windfury'}
  ]},
  { name:'Mage', abilities:[
    {name:'Fireball',level:1,icon:'spell_fire_fireball02'},
    {name:'Frostbolt',level:4,icon:'spell_frost_frostbolt02'},
    {name:'Arcane Missiles',level:8,icon:'spell_nature_starfall'},
    {name:'Polymorph',level:8,icon:'spell_nature_polymorph'},
    {name:'Conjure Water',level:4,icon:'inv_drink_18'},
    {name:'Conjure Food',level:6,icon:'inv_misc_food_73cinnamonroll'},
    {name:'Blink',level:20,icon:'spell_arcane_blink'},
    {name:'Counterspell',level:24,icon:'spell_frost_iceshock'},
    {name:'Evocation',level:20,icon:'spell_nature_purge'},
    {name:'Teleport (Cities)',level:20,icon:'spell_arcane_teleportstormwind'}
  ]},
  { name:'Warlock', abilities:[
    {name:'Shadow Bolt',level:1,icon:'spell_shadow_shadowbolt'},
    {name:'Immolate',level:1,icon:'spell_fire_immolation'},
    {name:'Corruption',level:4,icon:'spell_shadow_abominationexplosion'},
    {name:'Curse of Agony',level:8,icon:'spell_shadow_curseofsargeras'},
    {name:'Fear',level:8,icon:'spell_shadow_possession'},
    {name:'Drain Life',level:14,icon:'spell_shadow_lifedrain02'},
    {name:'Summon Imp',level:1,icon:'spell_shadow_summonimp'},
    {name:'Summon Voidwalker',level:10,icon:'spell_shadow_summonvoidwalker'},
    {name:'Summon Succubus',level:20,icon:'spell_shadow_summonsuccubus'},
    {name:'Summon Felhunter',level:30,icon:'spell_shadow_summonfelhunter'}
  ]},
  { name:'Druid', abilities:[
    {name:'Wrath',level:1,icon:'spell_nature_abolishmagic'},
    {name:'Moonfire',level:4,icon:'spell_nature_starfall'},
    {name:'Rejuvenation',level:4,icon:'spell_nature_rejuvenation'},
    {name:'Bear Form',level:10,icon:'ability_racial_bearform'},
    {name:'Cat Form',level:20,icon:'ability_druid_catform'},
    {name:'Travel Form',level:30,icon:'ability_druid_travelform'},
    {name:'Entangling Roots',level:8,icon:'spell_nature_stranglevines'},
    {name:'Regrowth',level:12,icon:'spell_nature_resistnature'},
    {name:'Rebirth',level:20,icon:'spell_nature_reincarnation'},
    {name:'Innervate',level:40,icon:'spell_nature_lightning'}
  ]}
]};

// ---- State ----
let DATA = load();
let active = null;

function renderClassList(filter=''){
  const root = $('#classList'); root.innerHTML='';
  DATA.classes
    .slice().sort((a,b)=>a.name.localeCompare(b.name))
    .filter(c=>c.name.toLowerCase().includes(filter.toLowerCase()))
    .forEach(c=>{
      const b = document.createElement('button');
      b.className='class-btn'+(active&&active.name===c.name?' active':'');
      b.textContent=c.name; b.onclick=()=>{active=c; updateDetail(); document.querySelectorAll('.class-btn').forEach(x=>x.classList.remove('active')); b.classList.add('active');};
      root.appendChild(b);
    });
  if(!active && DATA.classes[0]){ active = DATA.classes[0]; updateDetail(); }
}

function updateDetail(){
  const wrap = $('#tableWrap'); const title = $('#classTitle'); const cnt = $('#abilityCount');
  if(!active){ title.textContent='Select a class'; wrap.innerHTML=''; cnt.textContent=''; return; }
  title.textContent = active.name;
  const list = (active.abilities||[]).filter(a=> a.name.toLowerCase().includes(($('#filter').value||'').trim().toLowerCase()));
  cnt.textContent = `${list.length} abilities`;
  const table = document.createElement('table');
  table.innerHTML = '<thead><tr><th>Ability</th><th>Level learned</th></tr></thead>';
  const tb = document.createElement('tbody');
  list.sort((a,b)=> a.level-b.level || a.name.localeCompare(b.name)).forEach(a=>{
    const tr = document.createElement('tr');
    const iconUrl = a.icon ? `https://wow.zamimg.com/images/wow/icons/large/${a.icon}.jpg` : '';
    tr.innerHTML = `<td><div class="row-flex">${iconUrl?`<img class=\"ico\" src=\"${iconUrl}\" alt=\"\">`:''}<strong>${a.name}</strong></div></td><td>${a.level}</td>`;
    tb.appendChild(tr);
  });
  table.appendChild(tb); wrap.innerHTML=''; wrap.appendChild(table);
}

// ---- Search / shortcuts ----
$('#classSearch').addEventListener('input', e=> renderClassList(e.target.value));
$('#filter').addEventListener('input', updateDetail);
window.addEventListener('keydown', (e)=>{ if((e.key==='k' && (e.ctrlKey||e.metaKey))){ e.preventDefault(); $('#classSearch').focus(); } if(e.key==='/' && !e.ctrlKey && !e.metaKey){ e.preventDefault(); $('#filter').focus(); }});

// ---- Import / Export ----
$('#exportBtn').addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(DATA,null,2)],{type:'application/json'});
  const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='vanilla-class-spells-icons.json'; a.click(); setTimeout(()=>URL.revokeObjectURL(url),1500);
});
$('#fileInput').addEventListener('change', (e)=>{
  const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{
    try{ const obj=JSON.parse(r.result); if(!obj || !Array.isArray(obj.classes)) throw new Error('Missing "classes" array'); DATA=obj; save(DATA); active=null; renderClassList($('#classSearch').value||''); alert('Imported!'); }
    catch(err){ alert('Import failed: '+err.message); }
  }; r.readAsText(f);
});

// ---- Init ----
renderClassList('');
updateDetail();
</script>
</body>
</html>
